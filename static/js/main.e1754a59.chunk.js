(this["webpackJsonpaviation-api-metar-react-convert"]=this["webpackJsonpaviation-api-metar-react-convert"]||[]).push([[0],{11:function(e,t,a){e.exports={formInvalid:"Provider_formInvalid__1xjH3"}},12:function(e,t,a){e.exports={errorMsg:"ErrorFetch_errorMsg__1Iwh4"}},22:function(e,t,a){e.exports={headerContainer:"Header_headerContainer__2vdfr"}},23:function(e,t,a){e.exports={mainContainer:"Main_mainContainer__1IfS1"}},24:function(e,t,a){e.exports={inputCheck:"Search_inputCheck__2NI10"}},25:function(e,t,a){e.exports={footerContainer:"Footer_footerContainer__3PIXW"}},4:function(e,t,a){e.exports={airportName:"Metar_airportName__L2XxA",active:"Metar_active__1vhsW",labelSticker:"Metar_labelSticker__2_x5y",labelBold:"Metar_labelBold__pysWp",rawMetar:"Metar_rawMetar__2eBst",decodedMetar:"Metar_decodedMetar__x17rk"}},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(21),i=a.n(c),s=a(5),o=a.n(s),l=a(6),d=a(2),h=a(7),u=a.n(h),j=n.a.createContext(),p=a(11),b=a.n(p),m=a(0),g=function(e){var t,a=Object(r.useState)(" "),n=Object(d.a)(a,2),c=n[0],i=n[1],s=Object(r.useState)(""),h=Object(d.a)(s,2),p=h[0],g=h[1],O=Object(r.useState)(""),v=Object(d.a)(O,2),f=v[0],x=v[1],_=Object(r.useState)(""),C=Object(d.a)(_,2),M=C[0],N=C[1],k=Object(r.useState)(!1),S=Object(d.a)(k,2),w=S[0],y=S[1],L=Object(r.useState)(!1),T=Object(d.a)(L,2),V=T[0],I=T[1];Object(r.useEffect)((function(){var e="https://cors.bridged.cc/https://api.aviationapi.com/v1/weather/metar?apt=".concat(f,";"),t="https://cors.bridged.cc/https://api.aviationapi.com/v1/airports?apt=".concat(f,";");""!==f?(function(){var t=Object(l.a)(o.a.mark((function t(){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.get(e);case 3:a=t.sent,console.log(a),N(""),r=a.data[f],i(r),y(!1),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),N(t.t0.toString()),i(""),y(!1);case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}()(),function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get(t);case 3:0!==(a=e.sent).data[f].length&&g(Object(m.jsxs)("p",{children:[a.data[f][0].facility_name,", ",a.data[f][0].city]})),I(!1),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()):(g(null),y(!1),I(!1))}),[f]),t=""===f?"":M.toString().includes("Error")?M:w||V?"Loading...":c;var H=Object(r.useState)(""),W=Object(d.a)(H,2),A=W[0],B=W[1],E=Object(r.useState)(""),F=Object(d.a)(E,2),K=F[0],R=F[1];return Object(m.jsx)(j.Provider,{value:{airportName:p,query:f,message:t,searchText:A,errorMessage:K,actions:{submit:function(e){e.preventDefault(),y(!0),function(e){I(e)}(!0),""===A?(R(Object(m.jsx)("span",{className:b.a.formInvalid,children:"\u261d\ufe0f Please enter an airport."})),x("")):1===A.length||2===A.length||3===A.length?(R(Object(m.jsx)("span",{className:b.a.formInvalid,children:"\u274c ICAO airport codes are 4 characters long."})),x("")):(R(""),x(A.toUpperCase())),B("")},searchChange:function(e){B(e.target.value)}}},children:e.children})},O=(a(50),a(51),a(22)),v=a.n(O),f=function(){return Object(m.jsx)("header",{children:Object(m.jsxs)("div",{className:v.a.headerContainer,children:[Object(m.jsx)("h1",{children:"METAR Decoder"}),Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{className:"metar",children:"METeorological Aerodome Reports"})," for US airports"]})]})})},x=a(23),_=a.n(x),C=a(24),M=a.n(C),N=a(9),k=a.n(N),S=a(8),w=a.n(S),y=function(e){var t=Object(r.useState)(""),a=Object(d.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(""),s=Object(d.a)(i,2),h=s[0],j=s[1],p=Object(r.useState)(!1),b=Object(d.a)(p,2),g=b[0],O=b[1],v=Object(r.useState)(""),f=Object(d.a)(v,2),x=f[0],_=f[1];return Object(r.useEffect)((function(){var t="https://cors.bridged.cc/https://api.aviationapi.com/v1/airports?apt=".concat(e.value,";");return function(){var a=Object(l.a)(o.a.mark((function a(){var r,n,i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.get(t);case 3:r=a.sent,n=r.data[e.value][0].facility_name,c(n),i=r.data[e.value][0].city,j(i),O(!0),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),_(a.t0.toString()),O(!0);case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(){return a.apply(this,arguments)}}()(),function(){c(""),j(""),O(!0)}}),[e.value]),g?x.includes("TypeError")?Object(m.jsxs)("span",{className:w.a.formInvalid,children:["\u274c ",e.value.toUpperCase()," does not match any US ICAO airport code."]}):x.includes("Network Error")?Object(m.jsxs)("span",{className:w.a.formInvalid,children:["\u274c Unable to validate - ",x]}):Object(m.jsxs)("span",{className:w.a.formValid,children:["\u2714\ufe0f ",n," - ",h]}):Object(m.jsxs)("span",{className:w.a.formTyping,children:["\u270f\ufe0f ",e.value," - Checking..."]})},L=function(){var e=Object(r.useContext)(j),t=e.searchText,a=e.errorMessage,n=t.toUpperCase();return""===n?a:n.match(/[^A-Za-z]/)?Object(m.jsx)("span",{className:k.a.formInvalid,children:"\u274c Please enter alphabet characters only."}):n.startsWith("K")||n.startsWith("N")||n.startsWith("P")||n.startsWith("T")?4===n.length?Object(m.jsx)(y,{value:n}):Object(m.jsxs)("span",{className:k.a.formTyping,children:["\u270f\ufe0f ",n]}):Object(m.jsx)("span",{className:k.a.formInvalid,children:"\u274c US ICAO airport codes begin with K, N, P, or T."})},T=function(){var e=Object(r.useContext)(j),t=e.searchText,a=e.actions;return Object(m.jsxs)("form",{onSubmit:a.submit,title:"form",children:[Object(m.jsx)("input",{type:"text",id:"airport-code",placeholder:"Enter ICAO Airport Code",maxLength:"4",value:t.toUpperCase(),onChange:a.searchChange,"aria-label":"input-icao-airport-code"}),Object(m.jsx)("div",{className:M.a.inputCheck,children:Object(m.jsx)(L,{})}),Object(m.jsx)("button",{children:"Get weather information"})]})},V=a(4),I=a.n(V),H=function(e){return function(t){var a=t.raw.match(/(\d{5}|VRB\d{2})G?\d?\d?KT(.?\d{3}V\d{3})?/g).join(" "),r=t.raw.match(/(\d{5}|VRB\d{2})G?\d?\d?KT(.?\d{3}V\d{3})?/g).join().replace(" ","-"),n=t.raw.match(/(CLR|FEW|SCT|BKN|OVC)(\d?){3}/g).join(" "),c=t.raw.match(/(CLR|FEW|SCT|BKN|OVC)(\d?){3}/g).join("-").toString();return t.raw.replace(a,r).replace(n,c).split(" ").map((function(a){return a===t.station_id?Object(m.jsxs)("span",{className:"station-id",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:[a," "]}):a.match(/\d{6}Z/)?Object(m.jsxs)("span",{className:"time",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:[a," "]}):a.match(/(\d{5}|VRB\d{2})G?\d?\d?KT(.?\d{3}V\d{3})?/g)?Object(m.jsxs)("span",{className:"wind",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:[a.replace(/-/g," ")," "]}):a.match(/\d+SM/)?Object(m.jsxs)("span",{className:"visibility",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:[a," "]}):a.startsWith("CLR")||a.startsWith("FEW")||a.startsWith("SCT")||a.startsWith("BKN")||a.startsWith("OVC")?Object(m.jsxs)("span",{className:"sky-condition",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:[a.replace(/-/g," ")," "]}):a.match(/^M?\d{2}\/M?\d{2}$/)?Object(m.jsxs)("span",{className:"temp-dewpoint",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:[a," "]}):a.match(/A\d{4}/)?Object(m.jsxs)("span",{className:"altimeter-setting",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:[a," "]}):Object(m.jsxs)("span",{children:[a," "]})}))}(Object(r.useContext)(j).message)},W=function(e){var t,a,n=Object(r.useContext)(j).message,c=[],i=n.time_of_obs.replace("T"," at ").replace("Z"," Zulu (UTC)"),s=n.raw.match(/G\d+KT/);if(n.raw.includes("VRB"))a="Variable";else if(n.raw.includes("00000KT"))a="Not Applicable (Calm)";else if(n.raw.match(/^\d{3}V\d{3}$/)){var o=n.raw.match(/^\d{3}V\d{3}$/)[0];a="".concat(n.wind," Degrees, variable from ").concat(o[0]).concat(o[1]).concat(o[2]," to ").concat(o[4]).concat(o[5]).concat(o[6]," Degrees")}else a="".concat(n.wind," Degrees");if(t=s?"0"===s[0][1]?"Gusting to ".concat(s[0][2]):"Gusting to ".concat(s[0][1]).concat(s[0][2]):"","CLR"===n.sky_conditions[0].coverage)c=["Clear"];else for(var l=0;l<n.sky_conditions.length;l++){var d=n.sky_conditions[l].base_agl,h=n.sky_conditions[l].coverage,u="".concat(d," AGL").concat(h);c.push(u)}return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{className:"station-id",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:["Airport ID: ",n.station_id]}),Object(m.jsxs)("p",{className:"time",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:["Time of Observation: ",i]}),Object(m.jsxs)("p",{className:"wind",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:["Wind Direction / Speed: ",a," / ",n.wind_vel," ",t," Knots"]}),Object(m.jsxs)("p",{className:"visibility",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:["Visibility: ",n.visibility," Statute Miles"]}),Object(m.jsxs)("p",{className:"sky-condition",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:["Sky Condition: ",c.join(" - ").replace(/FEW/g," Few").replace(/SCT/g," Scattered").replace(/BKN/g," Broken").replace(/OVC/g," Overcast")]}),Object(m.jsxs)("p",{className:"temp-dewpoint",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:["Temperature / Dewpoint: ",n.temp,"\xb0C / ",n.dewpoint,"\xb0C"]}),Object(m.jsxs)("p",{className:"altimeter-setting",onMouseOver:e.highlight,onMouseOut:e.removeHighlight,onClick:e.addLabel,children:["Altimeter Setting: ",n.alt_hg," inHg (",n.alt_mb," mb)"]})]})},A=function(){var e=Object(r.useContext)(j).airportName,t=function(e){for(var t=document.getElementsByClassName(e.target.className),a=0;a<t.length;a++)t[a].classList.add("".concat(I.a.active))},a=function(){for(var e=document.querySelectorAll(".Metar_active__1vhsW"),t=0;t<e.length;t++)e[t].classList.remove("".concat(I.a.active))},n=function(e){var t=document.getElementsByClassName(e.target.className.split(" ")[0]);t[0].classList.add("".concat(I.a.labelSticker)),t[1].classList.add("".concat(I.a.labelBold));for(var a=document.querySelectorAll("#Metar_rawMetar__2eBst span:not(.".concat(e.target.className.split(" ")[0],")")),r=document.querySelectorAll("#Metar_decodedMetar__x17rk p:not(.".concat(e.target.className.split(" ")[0],")")),n=0;n<a.length;n++)a[n].classList.remove("".concat(I.a.labelSticker));for(var c=0;c<r.length;c++)r[c].classList.remove("".concat(I.a.labelBold))};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:I.a.airportName,children:e}),Object(m.jsxs)("div",{id:"results",children:[Object(m.jsx)("div",{id:I.a.rawMetar,children:Object(m.jsx)("h4",{children:Object(m.jsx)(H,{highlight:t,removeHighlight:a,addLabel:n})})}),Object(m.jsx)("div",{id:I.a.decodedMetar,children:Object(m.jsx)(W,{highlight:t,removeHighlight:a,addLabel:n})})]})]})},B=function(){var e=Object(r.useContext)(j).message;return Object(m.jsx)("p",{children:e})},E=a(12),F=a.n(E),K=function(){var e=Object(r.useContext)(j),t=e.message,a=e.query;return t.includes("404")?Object(m.jsxs)("p",{id:F.a.errorMsg,children:["\u26a0\ufe0f ",t," - No METAR found for ",a,"."]}):Object(m.jsxs)("p",{id:F.a.errorMsg,children:["\u26a0\ufe0f ",t,"."]})},R=function(){var e=Object(r.useContext)(j).message;return""===e?null:"Loading..."===e?Object(m.jsx)(B,{}):e.toString().includes("Error")?Object(m.jsx)(K,{}):Object(m.jsx)(A,{})},P=function(){return Object(m.jsx)("main",{children:Object(m.jsxs)("div",{className:_.a.mainContainer,children:[Object(m.jsx)(T,{}),Object(m.jsx)(R,{})]})})},U=a(25),D=a.n(U),G=function(){return Object(m.jsx)("footer",{children:Object(m.jsx)("div",{className:D.a.footerContainer,children:Object(m.jsx)("p",{children:"Not for real world use. Refer to official sources for weather information."})})})},Z=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f,{}),Object(m.jsx)(P,{}),Object(m.jsx)(G,{})]})};i.a.render(Object(m.jsx)(g,{children:Object(m.jsx)(Z,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={formValid:"Validated_formValid__1phPP",formTyping:"Validated_formTyping__1hoY1",formInvalid:"Validated_formInvalid__14iWh"}},9:function(e,t,a){e.exports={formTyping:"FormValidation_formTyping__1VZbu",formInvalid:"FormValidation_formInvalid__32ZT8"}}},[[52,1,2]]]);
//# sourceMappingURL=main.e1754a59.chunk.js.map